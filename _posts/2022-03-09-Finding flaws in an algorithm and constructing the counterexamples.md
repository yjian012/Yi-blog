---
title: Finding flaws in an algorithm and constructing the counterexamples
date: 2022-03-09
---
<script src="/Yi-blog/js/scripts.js"></script>
<link rel="stylesheet" href="/Yi-blog/css/styles.css">
<p>Here is the current fastest solution on submissions page to Leetcode&nbsp;49. Group Anagrams.</p><p></p><blockquote><span style="color: #666666;">Given an array of strings strs, group the anagrams together. You can return the answer in any order.</span></blockquote><p></p><pre style="background: rgb(247, 249, 250); border-radius: 3px; box-sizing: border-box; color: #263238; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13px; line-height: 1.6; margin-bottom: 1em; margin-top: 0px; overflow: auto; padding: 10px 15px;"><div style="color: #d4d4d4; font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 18px;"><div style="background-color: white; color: black; line-height: 18px;"><div><span style="color: blue;">class</span> <span style="color: #267f99;">Solution</span> {</div><div><span style="color: blue;">public:</span></div><div>&nbsp; &nbsp; <span style="color: #267f99;">vector</span>&lt;<span style="color: #267f99;">vector</span>&lt;<span style="color: #267f99;">string</span>&gt;&gt; <span style="color: #795e26;">groupAnagrams</span>(<span style="color: #267f99;">vector</span>&lt;<span style="color: #267f99;">string</span>&gt;<span style="color: blue;">&amp;</span> <span style="color: #001080;">strs</span>)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; unordered_map&lt;<span style="color: blue;">uint64_t</span>, <span style="color: #267f99;">std</span>::vector&lt;<span style="color: #267f99;">std</span>::string&gt;&gt; map;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #af00db;">for</span> (<span style="color: blue;">auto</span>&amp; word : strs)</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #001080;">map</span>[<span style="color: #795e26;">encode</span>(word)].<span style="color: #795e26;">emplace_back</span>(<span style="color: #267f99;">std</span>::<span style="color: #795e26;">move</span>(word));</div><div>&nbsp; &nbsp; &nbsp; &nbsp; </div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #267f99;">std</span>::vector&lt;<span style="color: #267f99;">std</span>::vector&lt;<span style="color: #267f99;">std</span>::string&gt;&gt; result;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #af00db;">for</span> (<span style="color: blue;">auto</span>&amp; pair : map)</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #001080;">result</span>.<span style="color: #795e26;">emplace_back</span>(<span style="color: #267f99;">std</span>::<span style="color: #795e26;">move</span>(<span style="color: #001080;">pair</span>.<span style="color: #001080;">second</span>));</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #af00db;">return</span> result;</div><div>&nbsp; &nbsp; }</div><br /><div>&nbsp; &nbsp; <span style="color: blue;">uint64_t</span> <span style="color: #795e26;">encode</span>(<span style="color: blue;">const</span> <span style="color: #267f99;">std</span>::<span style="color: #267f99;">string</span><span style="color: blue;">&amp;</span> <span style="color: #001080;">word</span>)</div><div>&nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">uint16_t</span> <span style="color: #001080;">counter</span>[<span style="color: #098658;">26</span>] = {<span style="color: #098658;">0</span>};</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #af00db;">for</span> (<span style="color: blue;">char</span> c : word) ++<span style="color: #001080;">counter</span>[c - <span style="color: #a31515;">'a'</span>];</div><div>&nbsp; &nbsp; &nbsp; &nbsp; </div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">uint64_t</span> result = <span style="color: #098658;">0</span>;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">uint64_t</span> degree = <span style="color: #098658;">1</span>;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; </div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #af00db;">for</span> (<span style="color: blue;">int</span> i = <span style="color: #098658;">0</span>; i &lt; <span style="color: #098658;">26</span>; ++i)</div><div>&nbsp; &nbsp; &nbsp; &nbsp; {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result += degree * (<span style="color: #001080;">counter</span>[i]);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; degree *= <span style="color: #098658;">26</span>;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #af00db;">return</span> result;</div><div>&nbsp; &nbsp; }</div><div>};</div></div></div></pre><p>Take a look at the "encode" function, which serves as a hash map from a string to an integer. Do you see any flaws?</p>I explained the flaw and gave a counterexample and a patched solution <a href="https://leetcode.com/problems/group-anagrams/discuss/1725661/C%2B%2B%3A-Implementing-a-Hash-table"><span style="color: #2b00fe;">here</span></a>. I spotted the problem immediately when I saw it, because I thought about something similar when I was solving the problem myself, and I noticed that it didn't work unless I can find a workaround. But somehow, the solution above passed all the test cases. So, yeah, in most cases it would work correctly, but with a certain probability it would fail, and it's guaranteed to fail when it's analyzed and targeted.
<div><br /></div>
<div>Here's a solution to a different problem which passed all the test cases but is also wrong: <a href="https://www.lintcode.com/submission/28226872/"><span style="color: #2b00fe;">link</span></a>. The problem is called "Flip Game II",<blockquote><div style="background: rgb(247, 249, 250); border-radius: 3px; box-sizing: border-box; line-height: 1.6; margin-bottom: 1em; margin-top: 0px; overflow: auto; padding: 10px 15px; text-align: left;"><span face="SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace" style="color: #263238;"><span>Description<br /></span></span><span face="SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace" style="color: #263238;"><span>You are playing the following Flip Game with your friend: Given a string that contains only these two characters: + and -, you and your friend take turns to flip two consecutive "++" into "--". The game ends when a person can no longer make a move and therefore the other person will be the winner.<br /></span></span><span face="SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace" style="color: #263238;"><span>Write a function to determine if the starting player can guarantee a win.</span></span></div></blockquote>The solution in question is</div><blockquote style="border: none; margin: 0px 0px 0px 40px; padding: 0px; text-align: left;"><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><span style="color: blue;">class</span> Solution {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><span style="color: blue;">public</span>:</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; <span style="color: blue;">bool</span> canWin(string &amp;s) {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">int</span> _true = <span style="color: #098658;">0</span>, _false = <span style="color: #098658;">0</span>;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">if</span>(s.length() &lt; <span style="color: #098658;">2</span>) {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">return</span> <span style="color: blue;">false</span>;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">else</span> {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">int</span> i = <span style="color: #098658;">0</span>, t = <span style="color: #098658;">0</span>;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">while</span>(i &lt; s.length()) {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">if</span>(!(s[i] == <span style="color: #a31515;">'+'</span> &amp;&amp; s[i + <span style="color: #098658;">1</span>] == <span style="color: #a31515;">'+'</span>)) {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i++;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">else</span> {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; t++;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">int</span> j = i;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">for</span>(; j &lt; s.length(); ++j) {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">if</span>(s[j] != <span style="color: #a31515;">'+'</span>) {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">break</span>;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">int</span> len = j - i;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i = j;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">bool</span> tmp = <span style="color: blue;">true</span>;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">if</span>(len != <span style="color: #098658;">3</span> &amp;&amp; (len % <span style="color: #098658;">2</span>)) {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp = <span style="color: blue;">false</span>;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">if</span>(tmp) {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _true++;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">else</span> {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _false++;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">if</span>(_true == <span style="color: #098658;">2</span>) {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">return</span> <span style="color: blue;">false</span>;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">else</span> <span style="color: blue;">if</span>(_true &gt; <span style="color: #098658;">0</span> || _false &gt; <span style="color: #098658;">1</span>) {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">return</span> <span style="color: blue;">true</span>;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">else</span> {</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: blue;">return</span> <span style="color: blue;">false</span>;</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>&nbsp; &nbsp; }</div></div></div><div><div style="background-color: #fffffe; font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>};</div></div></div></blockquote><div>This is linear in the length of the string, and it passed all the test cases, no wonder it's the first place on the leaderboard... except that, unfortunately, it's wrong.</div><div>It's because that I was looking for a linear solution myself, and I noticed that odd substrings and even substrings have different properties. But I figured that it's much more complicated than what the code above can compute. Can you give a counterexample such that the code above would give a wrong answer?</div><div>(Spoiler below)</div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div>I found interesting situations about the length of "+...+" substrings, especially with the even length ones. The strings that have odd length or length 2 are easy to deal with, but even length which &gt;=4 are much more complicated. It seems that if the length mod 8 is 0 or 2, then it's also simple, but if it's 4 or 6 then it's complicated. (I wonder if the number of strings that have length mod 8 == 4 or 6 determine the result.)</div><div>E.g, if you give your opponent two length 4 substrings, you'll win, but give him one length 4 and one length 6, you'll lose, 6 6 you'll win, 4 8 you'll lose.</div><div><br /></div><div>So, take a look at the solution above again. Do you see what he did?</div><div>He computed the number of odd and even length "+" substrings, and made the decision. But I already thought about this, it didn't work.</div><div>He decided that if the number of even strings is 2, then player 1 would fail for sure. But I already gave multiple examples where the number of even strings is 2, the situations are not all the same. Here's an counterexample: 4 6. If the string has a length 4 "+" substring and a length 6 one, then player 1 should win.</div><div><br /></div><div>Testing it with input&nbsp;<span color="rgba(0, 0, 0, 0.65)" face="SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace" style="font-size: 1em; white-space: pre-wrap;">"++++-++++++"</span> gives the wrong answer, as expected.</div><div>I wonder how the solution passed all the test cases... Is my counterexample a minimal one? What's the probability that the solution above would fail, given a random "+-" string? I'll leave these questions for future... if I have time...</div><div><br /></div><div>Update 230827, another counter-example to the top solution to H403. Frog Jump</div><div><a href="https://leetcode.com/problems/frog-jump/solutions/3966415/counter-example-to-the-top-submissions-beats-100/">https://leetcode.com/problems/frog-jump/solutions/3966415/counter-example-to-the-top-submissions-beats-100/</a></div>